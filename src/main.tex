%! Author = dejan
%! Date = 17/06/2022

% Preamble
\documentclass[12pt]{book}

% Packages
\usepackage[chorded]{songs}
\usepackage[utf8]{inputenc}
\usepackage[sfdefault]{roboto}
\usepackage[T1]{fontenc}
\usepackage[pdftex]{graphicx}
\usepackage[hidelinks]{hyperref}
\usepackage[
        a5paper,
        landscape,
        inner=14.5mm,
        outer=8.5mm,
        top=7mm,
        bottom=1.4cm,
        footskip=7.8mm,
        headheight=0
    ]{geometry}
\usepackage{color}
\usepackage{fancyhdr}


%\usepackage{layout}

%\usepackage{lipsum} # lorem ipsum

% Set header and footer
\pagestyle{fancy} % also change in kazalo.tex (at end of ile)
\fancyhf{}
\fancyfoot[RE]{\slshape \rightmark}
\fancyfoot[LO]{\slshape}
\fancyfoot[LE,RO]{\thepage}
\renewcommand{\headrulewidth}{0pt}


% Številka pesmi
\setlength{\songnumwidth}{1cm}
\renewcommand{\thesongnum}{\arabic{songnum}}
\renewcommand{\printsongnum}[1]{\LARGE#1}

% Naslov pesmi
\renewcommand{\stitlefont}{
    \rmfont\bf\large\baselineskip=20pt\lineskiplimit=0pt
}

\setlength{\fboxsep}{3pt}
\afterpreludeskip=0pt
\beforepostludeskip=0pt
\baselineadj=0pt plus 1.25pt minus 1pt

% Besedilo pesmi
%\newcommand\dejanFontSize{\fontsize{11.8pt}{14pt}\selectfont}
\setlength{\cbarwidth}{0pt}
\renewcommand{\lyricfont}{\sffamily\small}
\renewcommand{\notebgcolor}{white}
\noversenumbers
\songcolumns{2}
\columnsep=2.5mm
\versesep=10pt plus 3pt minus 4pt

\renewcommand{\clineparams}{ % višina akordov
    \baselineskip=10pt
    \lineskiplimit=1pt
    \lineskip=1pt
}

% pagebreaks
%\pagepreludes % do not break songs
%\vvpenalty=10000
%\ccpenalty=10000
%\vcpenalty=10000
%\cvpenalty=10000
%\brkpenalty=1000

% Akordi
\renewcommand{\chorusfont}{\it}
\renewcommand{\printchord}[1]{\rmfamily\bf#1}
\nosongnumbers
\MultiwordChords

% konc in začetek pesmi
\setlength{\sbarheight}{0pt}
\renewcommand\makeprelude{%
    \resettitles
    {\bfseries\thesongnum. \MakeUppercase{\songtitle}\par
    \nexttitle\foreachtitle{(\songtitle)\par}}%

    \colorbox{black}{
        \begin{minipage}{85mm}
            \color{white}\footnotesize{\textbf{\extendprelude}}
        \end{minipage}
    }
}

\renewcommand\makepostlude{%

}

% kazalo in take zadeve
\newindex{titleidx}{titleidx}
\setlength{\idxheadwidth}{0}
\sepindexesfalse
\renewcommand{\idxrefsfont}{\bfseries}



\renewcommand{\songtarget}[2]{\pdfbookmark[#1]{\songtitle}{#2}}
\renewcommand{\songlink}[2]{\hyperlink{#1}{#2}}


% Document
\begin{document}

    \input{naslovnica.tex}

    \input{kazalo.tex}

%     \layout
    \begin{songs}{titleidx,authidx}
        \input{pesmi.tex}
    \end{songs}


    \input{akordi.tex}
    \input{zadnjastran.tex}
\end{document}